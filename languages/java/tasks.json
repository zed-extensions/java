[
  {
    "label": "Run $ZED_CUSTOM_java_class_name",
    "command": "pkg=\"${ZED_CUSTOM_java_package_name:}\"; cls=\"$ZED_CUSTOM_java_class_name\"; if [ -n \"$pkg\" ]; then c=\"$pkg.$cls\"; else c=\"$cls\"; fi; if [ -f pom.xml ]; then ./mvnw clean compile exec:java -Dexec.mainClass=\"$c\"; elif [ -f gradlew ]; then ./gradlew run -PmainClass=\"$c\"; else find . -name '*.java' -not -path './bin/*' -not -path './target/*' -not -path './build/*' -print0 | xargs -0 javac -d bin && java -cp bin \"$c\"; fi;",
    "use_new_terminal": false,
    "reveal": "always",
    "tags": ["java-main"],
    "shell": {
      "with_arguments": {
        "program": "/bin/sh",
        "args": ["-c"]
      }
    }
  },
  {
    "label": "$ZED_CUSTOM_java_class_name.${ZED_CUSTOM_java_outer_class_name:}.$ZED_CUSTOM_java_method_name",
    "command": "package=\"$ZED_CUSTOM_java_package_name\"; outer=\"${ZED_CUSTOM_java_outer_class_name:}\"; inner=\"$ZED_CUSTOM_java_class_name\"; method=\"$ZED_CUSTOM_java_method_name\"; sep=\"$\"; if [ -n \"$outer\" ]; then c=\"$outer$sep$inner\"; else c=\"$inner\"; fi; if [ -f pom.xml ]; then ./mvnw clean test -Dtest=\"$package.$c#$method\"; elif [ -f gradlew ]; then ./gradlew test --tests \"$package.$c.$method\"; else >&2 echo 'No build system found'; exit 1; fi;",
    "use_new_terminal": false,
    "reveal": "always",
    "tags": ["java-test-method", "java-test-method-nested"],
    "shell": {
      "with_arguments": {
        "program": "/bin/sh",
        "args": ["-c"]
      }
    }
  },
  {
    "label": "Test class $ZED_CUSTOM_java_class_name",
    "command": "package=\"$ZED_CUSTOM_java_package_name\"; outer=\"${ZED_CUSTOM_java_outer_class_name:}\"; inner=\"$ZED_CUSTOM_java_class_name\"; sep=\"$\"; if [ -n \"$outer\" ]; then c=\"$outer$sep$inner\"; else c=\"$inner\"; fi; if [ -f pom.xml ]; then ./mvnw clean test -Dtest=\"$package.$c\"; elif [ -f gradlew ]; then ./gradlew test --tests \"$package.$c\"; else >&2 echo 'No build system found'; exit 1; fi;",
    "use_new_terminal": false,
    "reveal": "always",
    "tags": ["java-test-class", "java-test-class-nested"],
    "shell": {
      "with_arguments": {
        "program": "/bin/sh",
        "args": ["-c"]
      }
    }
  },
  {
    "label": "Run tests",
    "command": "if [ -f pom.xml ]; then ./mvnw clean test; elif [ -f gradlew ]; then ./gradlew test; else >&2 echo 'No build system found'; exit 1; fi;",
    "use_new_terminal": false,
    "reveal": "always",
    "shell": {
      "with_arguments": {
        "program": "/bin/sh",
        "args": ["-c"]
      }
    }
  },
  {
    "label": "Clear JDTLS cache",
    "command": "cache_dir=\"\"; if [ -n \"$XDG_CACHE_HOME\" ]; then cache_dir=\"$XDG_CACHE_HOME\"; elif [ \"$(uname)\" = \"Darwin\" ]; then cache_dir=\"$HOME/Library/Caches\"; else cache_dir=\"$HOME/.cache\"; fi; found=$(find \"$cache_dir\" -maxdepth 1 -type d -name 'jdtls-*' 2>/dev/null); if [ -n \"$found\" ]; then echo \"$found\" | xargs rm -rf && echo 'JDTLS cache cleared. Restart the language server'; else echo 'No JDTLS cache found'; fi",
    "use_new_terminal": false,
    "reveal": "always",
    "shell": {
      "with_arguments": {
        "program": "/bin/sh",
        "args": ["-c"]
      }
    }
  }
]
